<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>404 Found - Lost & Found Community</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Google font -->
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --card-bg: rgba(255,255,255,0.92);
      --muted: #64748b;
      --primary-600: #0ea5e9;
      --teal-500: #06b6d4;
    }
    *{ box-sizing:border-box; font-family:'Nunito',sans-serif; }
    html,body{ height:100%; margin:0; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; color:#04263a; }

    /* Improved blended background */
    body{
      background:
        radial-gradient(600px 260px at 8% 8%, rgba(6,182,212,0.06), transparent 14%),
        radial-gradient(500px 220px at 92% 88%, rgba(6,182,212,0.05), transparent 12%),
        linear-gradient(180deg, #f4fdff 0%, #e9f7fb 35%, #e3f4fb 60%, #eaf7fe 100%);
      min-height:100vh;
      overflow-x:hidden;
    }

    /* Header title styling: two-line with silhouette icons */
    .title-line {
      display:flex;
      align-items:center;
      justify-content:center;
      gap:12px;
    }
    .silhouette {
      width:28px;
      height:28px;
      display:inline-block;
      background: radial-gradient(circle at 30% 20%, #06b6d4 0%, #06b6d4 40%, transparent 41%),
                  linear-gradient(180deg,#07a6d0,#0288b0);
      border-radius:6px;
      box-shadow: 0 6px 18px rgba(6,182,212,0.12), inset 0 -6px 10px rgba(255,255,255,0.06);
      position:relative;
      flex-shrink:0;
    }
    /* small person shape on silhouette using pseudo elements */
    .silhouette:before, .silhouette:after {
      content: "";
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      background: white;
      opacity: 0.95;
      border-radius: 50%;
    }
    .silhouette:before { top: 6px; width:10px; height:10px; } /* head */
    .silhouette:after { top: 16px; width:14px; height:12px; border-radius:6px; } /* torso */

    /* Card styles (big hero boxes) */
    .hero-card {
      border-radius:20px;
      padding:40px;
      min-width:320px;
      background: linear-gradient(180deg, rgba(255,255,255,0.96), rgba(250,253,255,0.92));
      box-shadow: 0 18px 40px rgba(9,30,45,0.06);
      transition: transform .18s ease, box-shadow .18s ease, filter .18s ease;
      cursor:pointer;
      position:relative;
      overflow:visible;
      border: 1px solid rgba(8,25,40,0.03);
    }
    .hero-card .icon-box{
      width:72px; height:72px; border-radius:14px;
      display:flex; align-items:center; justify-content:center;
      margin:0 auto 18px auto;
      box-shadow: 0 8px 18px rgba(2,6,23,0.06);
      transition: transform .18s ease, box-shadow .18s ease;
    }
    .hero-card h3{ font-size:1.28rem; margin:0 0 6px 0; }

    /* hover glow */
    .hero-card:hover{
      transform: translateY(-8px) scale(1.01);
      box-shadow: 0 30px 60px rgba(6,182,212,0.10);
    }
    .hero-card:hover .icon-box { transform: translateY(-6px) scale(1.03); }

    /* click (active) glow ‚Äî toggled via .selected */
    .hero-card.selected{
      transform: translateY(-10px) scale(1.02);
      box-shadow: 0 38px 72px rgba(6,182,212,0.14), 0 0 40px rgba(6,182,212,0.08) inset;
      outline: none;
    }
    .hero-card.selected::after{
      content:'';
      position:absolute;
      inset:-12px;
      border-radius:22px;
      box-shadow: 0 0 40px rgba(6,182,212,0.22);
      pointer-events:none;
      opacity:0.95;
      transition: opacity .18s ease;
    }

    /* icon colors */
    .icon-find { background: linear-gradient(180deg,#3b82f6,#2563eb); color:white; }
    .icon-found { background: linear-gradient(180deg,#14b8a6,#0d9488); color:white; }

    /* page layout */
    .hero-row { display:flex; gap:28px; justify-content:center; align-items:stretch; flex-wrap:wrap; }

    /* small utilities */
    .fade-in { opacity:0; transform:translateY(8px); animation:fadeIn .5s ease forwards; }
    @keyframes fadeIn { to{ opacity:1; transform:translateY(0); } }

    .card{ border-radius:12px; background:white; box-shadow:0 8px 24px rgba(2,6,23,0.06); overflow:hidden; }
    .skeleton{ background:linear-gradient(90deg,#f0f0f0 25%,#e6e6e6 50%,#f0f0f0 75%); background-size:200% 100%; animation:loading 1.4s linear infinite; }
    @keyframes loading{ to{ background-position:-200% 0 } }

    /* minimal modal base */
    .modal{ display:none; position:fixed; inset:0; background: rgba(2,6,23,0.35); z-index:80; align-items:center; justify-content:center; padding:20px; }
    .modal.active{ display:flex; }

    /* form previews */
    .preview-thumb{ width:64px; height:64px; border-radius:10px; background-size:cover; background-position:center; border:1px solid rgba(2,6,23,0.04); }

    /* focus ring */
    *:focus{ outline: 3px solid rgba(6,182,212,0.12); outline-offset:2px; }

    @media (min-width:1024px){ .min-w-72{ min-width:340px } }
  </style>
</head>
<body class="overflow-x-hidden">

  <!-- Header -->
  <header class="relative z-10 py-10 px-6">
    <div class="max-w-6xl mx-auto text-center">
      <div class="mb-6">
        <div class="title-line">
          <div class="silhouette" aria-hidden="true"></div>
          <h1 style="font-size:44px; font-weight:800; margin:0; line-height:1;" class="text-slate-800">Find What's Lost.</h1>
          <div class="silhouette" aria-hidden="true"></div>
        </div>
        <div style="font-size:56px; font-weight:800; margin-top:14px; color:transparent; background:linear-gradient(90deg,#2563eb,#0ea5e9); -webkit-background-clip:text;">
          Return What's Found.
        </div>
      </div>

      <div class="hero-row mt-10">
        <div id="lostCard" class="hero-card w-[360px] text-center fade-in" tabindex="0" role="button" aria-pressed="false" onclick="handleHeroClick('lost')" onkeydown="if(event.key==='Enter') handleHeroClick('lost')">
          <div class="icon-box icon-find rounded-xl mx-auto">
            <!-- magnifier icon -->
            <svg width="36" height="36" viewBox="0 0 24 24" fill="white" aria-hidden="true">
              <path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79L20 21.49 21.49 20 16 14.5z"></path>
            </svg>
          </div>
          <h3>I Lost Something</h3>
          <p class="text-slate-600 mt-2">Report your lost item and we'll help you find it</p>
        </div>

        <div id="foundCard" class="hero-card w-[360px] text-center fade-in" tabindex="0" role="button" aria-pressed="false" onclick="handleHeroClick('found')" onkeydown="if(event.key==='Enter') handleHeroClick('found')">
          <div class="icon-box icon-found rounded-xl mx-auto">
            <!-- star icon -->
            <svg width="36" height="36" viewBox="0 0 24 24" fill="white" aria-hidden="true">
              <path d="M12 17.3l6.18 3.73-1.64-7.03L21 9.24l-7.19-.62L12 2 10.19 8.62 3 9.24l4.46 4.76L5.82 21z"></path>
            </svg>
          </div>
          <h3>I Found Something</h3>
          <p class="text-slate-600 mt-2">Help return someone's lost item ‚Äî add details and a photo</p>
        </div>
      </div>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-6 pb-16">
    <!-- Recently Found -->
    <section id="recentlyFoundSection" class="mb-16 fade-in">
      <h3 class="text-2xl font-bold text-slate-800 mb-4 text-center">Recently Found Items</h3>
      <div class="max-w-4xl mx-auto">
        <div id="recentlyFoundContainer" class="space-y-4">
          <div class="card p-6 rounded-3xl text-center" id="noFoundPlaceholder">
            <p class="text-slate-600">No items found yet ‚Äî items will appear here once reported and verified.</p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Modals -->

  <!-- Lost Modal -->
  <div id="lostModal" class="modal" aria-hidden="true">
    <div class="ghibli-card p-6 rounded-2xl max-w-md mx-4 w-full">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-xl font-bold text-red-600">Report Lost Item</h3>
        <button onclick="closeModal('lostModal')" class="text-slate-500 text-xl">‚úï</button>
      </div>
      <form id="lostForm" onsubmit="submitLostForm(event)" class="space-y-3">
        <div><label class="block text-sm font-semibold mb-1">Item Name</label><input id="lostItemName" name="itemName" type="text" required class="w-full p-2 border rounded" placeholder="e.g., Blue backpack"></div>
        <div><label class="block text-sm font-semibold mb-1">Where did you lose it?</label><input id="lostLocation" name="location" type="text" required class="w-full p-2 border rounded" placeholder="e.g., Central Park"></div>
        <div><label class="block text-sm font-semibold mb-1">Description</label><textarea id="lostDescription" name="description" required class="w-full p-2 border rounded h-24" placeholder="Describe your item..."></textarea></div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
          <div><label class="block text-sm font-semibold mb-1">Your Email</label><input id="lostEmail" name="email" type="email" required class="w-full p-2 border rounded" placeholder="your.email@example.com"></div>
          <div><label class="block text-sm font-semibold mb-1">Phone (optional)</label><input id="lostPhone" name="phone" type="tel" class="w-full p-2 border rounded" placeholder="+91 98765 43210"></div>
        </div>

        <div>
          <label class="block text-sm font-semibold mb-1">Photo (camera or upload)</label>
          <div class="flex items-center gap-3">
            <label class="cursor-pointer inline-flex items-center gap-2 px-3 py-2 border rounded bg-white">
              <input id="lostImageInput" name="image" type="file" accept="image/*" capture="environment" class="hidden" />
              <span>üì∑ Use camera / Upload</span>
            </label>
            <div id="lostPreview" class="preview-thumb bg-gray-50 flex items-center justify-center text-sm text-slate-400">No img</div>
          </div>
        </div>

        <div class="flex gap-2">
          <button type="submit" class="flex-1 bg-red-500 text-white py-2 rounded font-semibold">Report Lost Item</button>
          <button type="button" class="flex-1 bg-gray-100 py-2 rounded" onclick="closeModal('lostModal')">Cancel</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Found Modal -->
  <div id="foundModal" class="modal" aria-hidden="true">
    <div class="ghibli-card p-6 rounded-2xl max-w-md mx-4 w-full">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-xl font-bold text-emerald-700">Report Found Item</h3>
        <button onclick="closeModal('foundModal')" class="text-slate-500 text-xl">‚úï</button>
      </div>
      <form id="foundForm" onsubmit="submitFoundForm(event)" class="space-y-3">
        <div><label class="block text-sm font-semibold mb-1">Item Name</label><input id="foundItemName" name="itemName" type="text" required class="w-full p-2 border rounded" placeholder="e.g., Red wallet"></div>
        <div><label class="block text-sm font-semibold mb-1">Where did you find it?</label><input id="foundLocation" name="location" type="text" required class="w-full p-2 border rounded" placeholder="e.g., Airport"></div>
        <div><label class="block text-sm font-semibold mb-1">Description</label><textarea id="foundDescription" name="description" required class="w-full p-2 border rounded h-24" placeholder="Describe the item..."></textarea></div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
          <div><label class="block text-sm font-semibold mb-1">Your Email</label><input id="foundEmail" name="email" type="email" required class="w-full p-2 border rounded" placeholder="your.email@example.com"></div>
          <div><label class="block text-sm font-semibold mb-1">Phone (optional)</label><input id="foundPhone" name="phone" type="tel" class="w-full p-2 border rounded" placeholder="+91 98765 43210"></div>
        </div>

        <div>
          <label class="block text-sm font-semibold mb-1">Photo (camera or upload)</label>
          <div class="flex items-center gap-3">
            <label class="cursor-pointer inline-flex items-center gap-2 px-3 py-2 border rounded bg-white">
              <input id="foundImageInput" name="image" type="file" accept="image/*" capture="environment" class="hidden" />
              <span>üì∑ Use camera / Upload</span>
            </label>
            <div id="foundPreview" class="preview-thumb bg-gray-50 flex items-center justify-center text-sm text-slate-400">No img</div>
          </div>
        </div>

        <div class="flex gap-2">
          <button type="submit" class="flex-1 bg-emerald-500 text-white py-2 rounded font-semibold">Report Found Item</button>
          <button type="button" class="flex-1 bg-gray-100 py-2 rounded" onclick="closeModal('foundModal')">Cancel</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Minimal other modals (kept unchanged) -->
  <div id="updatesModal" class="modal" aria-hidden="true">
    <div class="ghibli-card p-6 rounded-2xl max-w-2xl mx-4">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-xl font-bold text-slate-800">Recent Updates</h3>
        <button onclick="closeModal('updatesModal')" class="text-slate-500 text-xl">‚úï</button>
      </div>
      <div><p class="text-slate-600">No recent updates.</p></div>
    </div>
  </div>

  <div id="faqModal" class="modal" aria-hidden="true">
    <div class="ghibli-card p-6 rounded-2xl max-w-2xl mx-4">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-xl font-bold text-slate-800">FAQ</h3>
        <button onclick="closeModal('faqModal')" class="text-slate-500 text-xl">‚úï</button>
      </div>
      <div class="space-y-3 text-slate-600">
        <div><strong>How do I report a lost item?</strong><p>Click "I Lost Something" and fill the form.</p></div>
        <div><strong>Is this service free?</strong><p>Yes ‚Äî 404 Found is free to use.</p></div>
      </div>
    </div>
  </div>

  <!-- Script at bottom (ensures DOM ready) -->
  <script>
    /* ----------------- Utilities ----------------- */
    function openModal(id) {
      const el = document.getElementById(id);
      if(!el) return;
      el.classList.add('active');
      el.setAttribute('aria-hidden','false');
    }
    function closeModal(id) {
      const el = document.getElementById(id);
      if(!el) return;
      el.classList.remove('active');
      el.setAttribute('aria-hidden','true');
    }

    /* Hero click handling: add glow + open forms */
    function handleHeroClick(which){
      const lostCard = document.getElementById('lostCard');
      const foundCard = document.getElementById('foundCard');

      if (which === 'lost'){
        lostCard.classList.add('selected');
        foundCard.classList.remove('selected');
        // open lost modal
        setTimeout(()=> openModal('lostModal'), 120);
      } else {
        foundCard.classList.add('selected');
        lostCard.classList.remove('selected');
        setTimeout(()=> openModal('foundModal'), 120);
      }
      // remove selected state after a short time so glow persists briefly
      setTimeout(()=> {
        // keep selected for accessibility if modal is open
        if (!document.getElementById(which + 'Modal').classList.contains('active')) {
          lostCard.classList.remove('selected');
          foundCard.classList.remove('selected');
        }
      }, 2200);
    }

    /* ----------- Form logic & storage (in-memory) ----------- */
    let recentlyFound = [];
    let lostReports = [];
    let matchedItems = [];

    function escapeHtml(unsafe = '') {
      return String(unsafe).replace(/[&<"'>]/g, (m)=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#039;' })[m]);
    }

    // helper: convert file to data URL
    function fileToDataUrl(file){ return new Promise((res)=>{ if(!file) return res(null); const r=new FileReader(); r.onload=()=>res(r.result); r.onerror=()=>res(null); r.readAsDataURL(file); }); }

    async function submitFoundForm(e){
      e.preventDefault();
      const name = document.getElementById('foundItemName').value.trim();
      const location = document.getElementById('foundLocation').value.trim();
      const description = document.getElementById('foundDescription').value.trim();
      const email = document.getElementById('foundEmail').value.trim();
      const phone = document.getElementById('foundPhone').value.trim();
      const file = document.getElementById('foundImageInput').files[0] || null;

      if (!name || !location || !email){ alert('Please fill item name, location and your email.'); return; }
      const dataUrl = await fileToDataUrl(file);

      const obj = {
        id: Date.now() + Math.floor(Math.random()*999),
        name, location, description, email, phone,
        image: dataUrl || null,
        coordinates: null,
        finderName: email.split('@')[0] || 'Finder'
      };
      recentlyFound.push(obj);
      matchedItems = recentlyFound.slice();
      renderRecentlyFound();
      alert('Thanks ‚Äî found item reported and listed.');
      document.getElementById('foundForm').reset();
      document.getElementById('foundPreview').style.backgroundImage = '';
      document.getElementById('foundPreview').textContent = 'No img';
      closeModal('foundModal');
    }

    async function submitLostForm(e){
      e.preventDefault();
      const name = document.getElementById('lostItemName').value.trim();
      const location = document.getElementById('lostLocation').value.trim();
      const description = document.getElementById('lostDescription').value.trim();
      const email = document.getElementById('lostEmail').value.trim();
      const phone = document.getElementById('lostPhone').value.trim();
      const file = document.getElementById('lostImageInput').files[0] || null;

      const dataUrl = await fileToDataUrl(file);
      const obj = { name, location, description, email, phone, image: dataUrl || null, reportedAt: Date.now() };
      lostReports.push(obj);
      alert('Thanks ‚Äî lost item reported.');
      document.getElementById('lostForm').reset();
      document.getElementById('lostPreview').style.backgroundImage = '';
      document.getElementById('lostPreview').textContent = 'No img';
      closeModal('lostModal');
    }

    // Render recently found cards
    function renderRecentlyFound(){
      const container = document.getElementById('recentlyFoundContainer');
      const placeholder = document.getElementById('noFoundPlaceholder');
      container.innerHTML = '';
      if (!recentlyFound.length){
        container.appendChild(placeholder);
        return;
      }
      recentlyFound.slice().reverse().forEach((item) => {
        const card = document.createElement('div');
        card.className = 'card p-4 rounded-3xl flex gap-4 items-center';
        const imgHTML = item.image ? `<div class="w-20 h-20 rounded overflow-hidden bg-gray-100 flex-none" style="background-image:url('${item.image}'); background-size:cover; background-position:center;"></div>` : `<div class="w-20 h-20 rounded overflow-hidden bg-gray-50 flex-none flex items-center justify-center text-sm text-slate-400">No img</div>`;
        card.innerHTML = `
          ${imgHTML}
          <div class="flex-1 text-left">
            <div class="font-semibold text-slate-800">${escapeHtml(item.name || 'Item')}</div>
            <div class="text-sm text-slate-600">üìç ${escapeHtml(item.location || 'Unknown')}</div>
            <div class="text-sm text-slate-600 mt-1">${escapeHtml(item.description || '')}</div>
            <div class="text-xs text-slate-500 mt-2">Contact: ${escapeHtml(item.email || '‚Äî')} ${item.phone ? '‚Ä¢ ' + escapeHtml(item.phone) : ''}</div>
          </div>
        `;
        container.appendChild(card);
      });
    }

    /* Image preview handlers */
    document.getElementById('foundImageInput').addEventListener('change', (ev)=>{
      const f = ev.target.files && ev.target.files[0] ? ev.target.files[0] : null;
      const p = document.getElementById('foundPreview');
      if (!f) { p.style.backgroundImage=''; p.textContent='No img'; return; }
      const r = new FileReader();
      r.onload = ()=> { p.style.backgroundImage = `url('${r.result}')`; p.textContent = ''; };
      r.readAsDataURL(f);
    });
    document.getElementById('lostImageInput').addEventListener('change', (ev)=>{
      const f = ev.target.files && ev.target.files[0] ? ev.target.files[0] : null;
      const p = document.getElementById('lostPreview');
      if (!f) { p.style.backgroundImage=''; p.textContent='No img'; return; }
      const r = new FileReader();
      r.onload = ()=> { p.style.backgroundImage = `url('${r.result}')`; p.textContent = ''; };
      r.readAsDataURL(f);
    });

    /* Small utilities: other modals kept functional */
    document.addEventListener('click', (e)=>{
      // close modal when clicking outside modal content
      const modals = document.querySelectorAll('.modal.active');
      modals.forEach(m => {
        if (m === e.target) { closeModal(m.id); }
      });
    });

    // Expose small functions for header buttons (if present elsewhere)
    window.openModal = openModal;
    window.closeModal = closeModal;

    // Initial rendering
    renderRecentlyFound();

    // Accessibility: remove selected glow if modal is closed by user
    const allModals = ['lostModal','foundModal'];
    allModals.forEach(mid => {
      const el = document.getElementById(mid);
      // observe class changes to remove 'selected' state when modal closed
      const observer = new MutationObserver(()=> {
        const lostCard = document.getElementById('lostCard');
        const foundCard = document.getElementById('foundCard');
        if (!el.classList.contains('active')) {
          lostCard.classList.remove('selected');
          foundCard.classList.remove('selected');
        }
      });
      observer.observe(el, { attributes: true, attributeFilter: ['class'] });
    });
  </script>
</body>
</html>
